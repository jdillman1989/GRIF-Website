jQuery(document).ready(function(a){function t(t){var s=t.data("ppp"),n=t.data("action"),i=t.data("tax"),r=t.data("type"),o=t.parent().siblings(".archive-container");o.fadeTo("fast",0),a.ajax({type:"GET",url:n,data:{tax:i,ppp:s,type:r},complete:function(a){var s=JSON.parse(a.responseText);t.data("next",2),t.data("max",s.max),2>s.max?t.addClass("disabled"):t.removeClass("disabled");var n=e(s,r);o.html(n),o.append('<a class="card empty" href="#"></a><a class="card empty" href="#"></a><a class="card empty" href="#"></a>'),o.fadeTo("fast",1)}})}function e(a,t){for(var e="",n=0;n<=a.data.length-1;n++){switch(t){case"sermons":case"events":var i={image:a.data[n].image,title:a.data[n].title,permalink:a.data[n].permalink,date:a.data[n].date},r=s(i,t)}e+=r}return e}function s(t,e){switch(e){case"sermons":case"events":var s=a(".card").first().clone();s.attr("href",t.permalink),s.find(".card-image").attr("style","background-image: url("+t.image+"); background-repeat: no-repeat; background-position: center center; background-size: cover;"),s.find(".card-content .date").text(t.date),s.find(".card-content .post-title").text(t.title);break;default:return!1}var n=a("<div>").append(s.clone()).html();return n}function n(){o.fadeOut(),l.fadeOut(),l.css({height:"auto"});var t=1200,e=500,s=85,n=75;h.each(function(){var i=Math.floor(Math.random()*(t-e+1))+e,r=Math.floor(Math.random()*(s-n+1))+n;a(this).css({"-webkit-transition":"-webkit-transform "+i+"ms ease","-moz-transition":"-moz-transform "+i+"ms ease","-o-transition":"-o-transform "+i+"ms ease",transition:"transform "+i+"ms ease","-webkit-transform":"translate(0, 100vh)","-moz-transform":"translate(0, 100vh)","-ms-transform":"translate(0, 100vh)","-o-transform":"translate(0, 100vh)",transform:"translate(0, 100vh)","background-color":"rgba(35,31,32,"+r/100+")"})})}function i(){h.each(function(){a(this).css({"-webkit-transform":"translate(0, 0vh)","-moz-transform":"translate(0, 0vh)","-ms-transform":"translate(0, 0vh)",transform:"translate(0, 0vh)"})})}function r(t,e){var s=a(window).height();c.html(a("#"+t).clone()).html(),e&&l.addClass(e),setTimeout(function(){l.fadeIn();var a=l.outerHeight();a>s-30?l.css({height:s-30,"margin-top":15}):l.css({"margin-top":s/2-a/2})},600)}a(".news-tax-label").click(function(){a(this).parent().siblings(".news-tax").find(".news-tax-label").each(function(){a(this).next();a(this).hasClass("displayed")&&(a(this).removeClass("displayed"),a(this).next().slideUp(300))});var t=a(this).next();a(this).hasClass("displayed")?(a(this).removeClass("displayed"),t.slideUp(300)):(a(this).addClass("displayed"),t.slideDown(300))}),a(".next-link").click(function(t){t.preventDefault();var s=a(this),n=parseInt(s.data("next")),i=s.data("ppp"),r=s.data("max"),o=s.data("tax"),l=s.data("type"),c=s.data("action");a.ajax({type:"GET",url:c,data:{next:n,ppp:i,tax:o,type:l},complete:function(t){s.data("next",n+1),n+1>r?s.addClass("disabled"):s.removeClass("disabled");var i=JSON.parse(t.responseText),o=e(i,l);a(".empty").remove(),s.parent().siblings(".archive-container").append(o),s.parent().siblings(".archive-container").append('<a class="card empty" href="#"></a><a class="card empty" href="#"></a><a class="card empty" href="#"></a>')}})}),a(".news-tax-list li a").click(function(e){e.preventDefault();var s=a(this),n=s.data("tax"),i=s.data("term"),r=s.data("type"),o=a(".full-archive."+r).find(".next-link");a(".news-tax-label").each(function(){a(this).next().slideUp(300),a(this).removeClass("displayed")});var l=s.closest(".news-tax");"all"==i?l.find(".news-tax-label").text(s.data("all")):l.find(".news-tax-label").text(s.text());var c=o.data("tax");c[n]=[i],o.data("tax",c),t(o)}),a(".filter-search").submit(function(t){t.preventDefault();var s=a(this),n=s.data("type"),i=s.find(".news-search").val();if(i.length>1){var r=a(".full-archive."+n).find(".next-link"),o=r.data("action");r.addClass("disabled"),a(".news-tax-label").each(function(){a(this).next();a(this).hasClass("displayed")&&(a(this).removeClass("displayed"),a(this).next().slideUp(300)),a(this).text(a(this).data("all"))});var l=r.parent().siblings(".archive-container");l.fadeTo("fast",0),a.ajax({type:"GET",url:o,data:{s:i,type:n},complete:function(a){var t=JSON.parse(a.responseText),s=e(t,n);l.html(s),l.fadeTo("fast",1)}})}});var o=(a(".lightbox"),a(".overlay")),l=a(".lightbox-container"),c=a(".lightbox-content"),d=a(".close"),h=a(".overlay-animation");n(),a(".overlay-animation").click(function(){n()}),d.click(function(){n()}),a("body").on("click",".lightbox",function(t){t.preventDefault();var e=a(this),s=e.data("lb"),n=e.data("class");o.fadeIn(),i(),null==n&&(n=!1),r(s,n)});var f=1200,p=a("#mobileNav"),m=a(".main-nav"),v=!1;p.click(function(a){a.stopPropagation(),v?(m.css({transform:"translate(0px, 0px)"}),p.removeClass("active"),v=!1):(m.css({transform:"translate("+-1*m.outerWidth()+"px, 0px)"}),p.addClass("active"),v=!0)}),a("#close").click(function(a){v&&(m.css({transform:"translate(0px, 0px)"}),p.removeClass("active"),v=!1)}),a("html").click(function(){v&&(m.css({transform:"translate(0px, 0px)"}),p.removeClass("active"),v=!1)}),a(window).resize(function(){a(window).width()>f&&v&&(m.css({transform:"translate(0px, 0px)"}),p.removeClass("active"),v=!1)});var u=a(".search-nav"),x=(a(".search-input-container"),a(".filter-search"),a(window).width());if(u.click(function(t){t.preventDefault();var e=a(this),s=e.parent(),n=s.find(".search-input-container");x<761?e.hasClass("active")?(s.submit(),n.css({transform:"translate(0px, 0px)"}),u.removeClass("active")):(n.css({transform:"translate("+-1*n.outerWidth()+"px, 0px)"}),u.addClass("active")):s.submit()}),a("body").on("click",".accordion-toggle",function(){a(this).toggleClass("active"),a(this).next(".accordion-content").slideToggle(300)}),a(window).scroll(function(){a(this).scrollTop()>2?a("header").addClass("header-scrolled"):a("header").removeClass("header-scrolled")}),a(".announcement").length&&setTimeout(function(){a(".announcement").css({height:"60px"})},1e3),a(".announcement .close").click(function(t){t.preventDefault(),a(".announcement").css({height:"0"})}),a(".news-filters").length){var b=window.location.hash;if(b.length>2){var g=b.substring(1),w=g.split("-");if("search"==w[0]){var y=decodeURIComponent(w[1]);a(".news-search").val(y),a(".filter-search").submit()}else a("."+g).click()}}a(".resource-search").submit(function(t){t.preventDefault();var e=a(this).data("action"),s=a(this).find("input").val(),n=encodeURIComponent(s);window.location.href=e+"#search-"+n})});